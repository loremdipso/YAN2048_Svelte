var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function l(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,n,o,r){return t[1]&&r?e(o.ctx.slice(),t[1](r(n))):o.ctx}function i(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function u(t){return null==t?"":t}function a(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function $(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function h(t){return document.createTextNode(t)}function m(){return h(" ")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function x(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function w(t,e,n){t.classList[n?"add":"remove"](e)}let b;function k(t){b=t}function C(){const t=function(){if(!b)throw new Error("Function called outside component initialization");return b}();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(e,n);o.slice().forEach((e=>{e.call(t,r)}))}}}function _(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const M=[],E=[],A=[],L=[],j=Promise.resolve();let S=!1;function z(t){A.push(t)}const N=new Set;let R=0;function O(){const t=b;do{for(;R<M.length;){const t=M[R];R++,k(t),P(t.$$)}for(k(null),M.length=0,R=0;E.length;)E.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];N.has(e)||(N.add(e),e())}A.length=0}while(M.length);for(;L.length;)L.pop()();S=!1,N.clear(),k(t)}function P(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(z)}}const q=new Set;let B;function G(t,e){t&&t.i&&(q.delete(t),t.i(e))}function T(t,e,n,o){if(t&&t.o){if(q.has(t))return;q.add(t),B.c.push((()=>{q.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function Z(t,e){T(t,1,1,(()=>{e.delete(t.key)}))}function D(t){t&&t.c()}function F(t,e,o,c){const{fragment:s,on_mount:i,on_destroy:u,after_update:a}=t.$$;s&&s.m(e,o),c||z((()=>{const e=i.map(n).filter(l);u?u.push(...e):r(e),t.$$.on_mount=[]})),a.forEach(z)}function H(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function I(t,e){-1===t.$$.dirty[0]&&(M.push(t),S||(S=!0,j.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(e,n,l,c,s,i,u,a=[-1]){const f=b;k(e);const $=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:s,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:o(),dirty:a,skip_bound:!1,root:n.target||f.$$.root};u&&u($.root);let p=!1;if($.ctx=l?l(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return $.ctx&&s($.ctx[t],$.ctx[t]=r)&&(!$.skip_bound&&$.bound[t]&&$.bound[t](r),p&&I(e,t)),n})):[],$.update(),p=!0,r($.before_update),$.fragment=!!c&&c($.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);$.fragment&&$.fragment.l(t),t.forEach(d)}else $.fragment&&$.fragment.c();n.intro&&G(e.$$.fragment),F(e,n.target,n.anchor,n.customElement),O()}k(f)}class V{$destroy(){H(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Y(e){let n,o,r,l,c,s;return{c(){n=$("a"),o=p("svg"),r=p("path"),l=p("path"),c=p("path"),v(r,"class","background"),v(r,"d","M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"),v(l,"d","M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"),v(l,"fill","currentColor"),x(l,"transform-origin","130px 106px"),v(l,"class","octo-arm svelte-1fmpe6o"),v(c,"d","M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"),v(c,"fill","currentColor"),v(c,"class","octo-body"),v(o,"width","80"),v(o,"height","80"),v(o,"viewBox","0 0 250 250"),v(o,"aria-hidden","true"),x(o,"fill",e[1]),v(o,"class",s=u(e[2])+" svelte-1fmpe6o"),v(n,"href",e[0]),v(n,"target","#"),v(n,"class","github-corner svelte-1fmpe6o"),v(n,"aria-label","View source on GitHub")},m(t,e){f(t,n,e),a(n,o),a(o,r),a(o,l),a(o,c)},p(t,[e]){2&e&&x(o,"fill",t[1]),4&e&&s!==(s=u(t[2])+" svelte-1fmpe6o")&&v(o,"class",s),1&e&&v(n,"href",t[0])},i:t,o:t,d(t){t&&d(n)}}}function J(t,e,n){let o,{href:r}=e,{position:l="topRight"}=e,{fill:c="#ff2768"}=e,{small:s=!1}=e;return t.$$set=t=>{"href"in t&&n(0,r=t.href),"position"in t&&n(3,l=t.position),"fill"in t&&n(1,c=t.fill),"small"in t&&n(4,s=t.small)},t.$$.update=()=>{24&t.$$.dirty&&n(2,o=`${l}${s?" small":""}`)},[r,c,o,l,s]}class K extends V{constructor(t){super(),U(this,t,J,Y,c,{href:0,position:3,fill:1,small:4})}}function Q(t){return t[(e=0,n=t.length,(e+Math.floor(Math.random()*n))%t.length)];var e,n}const W=[1,2,4];function X(t,e){let n=[];for(let o=0;o<t;o++)o<e?n.push({id:et(),value:tt()}):n.push({id:et(),value:0});return function(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}}(n),n}function tt(){return Q(W)}const et=(()=>{let t=0;return()=>t++})(),nt=["#79867c","#926d6f","#9c1ce3","#4f0af5","#18a1e7","#3e66c1","#9edb24","#48c639","#ead515","#f96d06","#ff0700","#ff00cc"];function ot(t){let e,n,o,r,l,c;const i=t[7].default,u=function(t,e,n,o){if(t){const r=s(t,e,n,o);return t[0](r)}}(i,t,t[6],null);return{c(){e=$("i"),u&&u.c(),v(e,"aria-hidden","true"),v(e,"class",n="material-icons icon text-xl select-none "+t[5].class+" duration-200 ease-in svelte-zzky5a"),v(e,"style",o=t[4]?`color: ${t[4]}`:""),w(e,"reverse",t[2]),w(e,"tip",t[3]),w(e,"text-base",t[0]),w(e,"text-xs",t[1])},m(n,o){f(n,e,o),u&&u.m(e,null),r=!0,l||(c=g(e,"click",t[8]),l=!0)},p(t,[l]){u&&u.p&&(!r||64&l)&&function(t,e,n,o,r,l){if(r){const c=s(e,n,o,l);t.p(c,r)}}(u,i,t,t[6],r?function(t,e,n,o){if(t[2]&&o){const r=t[2](o(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|r[o];return t}return e.dirty|r}return e.dirty}(i,t[6],l,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[6]),null),(!r||32&l&&n!==(n="material-icons icon text-xl select-none "+t[5].class+" duration-200 ease-in svelte-zzky5a"))&&v(e,"class",n),(!r||16&l&&o!==(o=t[4]?`color: ${t[4]}`:""))&&v(e,"style",o),36&l&&w(e,"reverse",t[2]),40&l&&w(e,"tip",t[3]),33&l&&w(e,"text-base",t[0]),34&l&&w(e,"text-xs",t[1])},i(t){r||(G(u,t),r=!0)},o(t){T(u,t),r=!1},d(t){t&&d(e),u&&u.d(t),l=!1,c()}}}function rt(t,n,o){let{$$slots:r={},$$scope:l}=n,{small:c=!1}=n,{xs:s=!1}=n,{reverse:u=!1}=n,{tip:a=!1}=n,{color:f="default"}=n;return t.$$set=t=>{o(5,n=e(e({},n),i(t))),"small"in t&&o(0,c=t.small),"xs"in t&&o(1,s=t.xs),"reverse"in t&&o(2,u=t.reverse),"tip"in t&&o(3,a=t.tip),"color"in t&&o(4,f=t.color),"$$scope"in t&&o(6,l=t.$$scope)},n=i(n),[c,s,u,a,f,n,l,r,function(e){_.call(this,t,e)}]}class lt extends V{constructor(t){super(),U(this,t,rt,ot,c,{small:0,xs:1,reverse:2,tip:3,color:4})}}function ct(t){let e;return{c(){e=h(t[0])},m(t,n){f(t,e,n)},p(t,n){1&n&&y(e,t[0])},d(t){t&&d(e)}}}function st(t){let e,n,o,r,l;return n=new lt({props:{$$slots:{default:[ct]},$$scope:{ctx:t}}}),{c(){e=$("div"),D(n.$$.fragment),v(e,"class","svelte-w9lwo")},m(c,s){f(c,e,s),F(n,e,null),o=!0,r||(l=g(e,"click",t[2]),r=!0)},p(t,[e]){const o={};9&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){o||(G(n.$$.fragment,t),o=!0)},o(t){T(n.$$.fragment,t),o=!1},d(t){t&&d(e),H(n),r=!1,l()}}}function it(t,e,n){const o=C();let{icon:r}=e;return t.$$set=t=>{"icon"in t&&n(0,r=t.icon)},[r,o,()=>o("click")]}class ut extends V{constructor(t){super(),U(this,t,it,st,c,{icon:0})}}function at(e){let n;return{c(){n=$("div"),v(n,"class","cell empty svelte-1j11uma")},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function ft(t){let e,n,o=t[0].value+"";return{c(){e=$("div"),n=h(o),v(e,"class","cell svelte-1j11uma"),x(e,"background-color",t[1])},m(t,o){f(t,e,o),a(e,n)},p(t,r){1&r&&o!==(o=t[0].value+"")&&y(n,o),2&r&&x(e,"background-color",t[1])},d(t){t&&d(e)}}}function dt(e){let n;function o(t,e){return t[0].value>0?ft:at}let r=o(e),l=r(e);return{c(){n=$("div"),l.c(),v(n,"class","container svelte-1j11uma")},m(t,e){f(t,n,e),l.m(n,null)},p(t,[e]){r===(r=o(t))&&l?l.p(t,e):(l.d(1),l=r(t),l&&(l.c(),l.m(n,null)))},i:t,o:t,d(t){t&&d(n),l.d()}}}function $t(t,e,n){let o,{cell:r}=e;return t.$$set=t=>{"cell"in t&&n(0,r=t.cell)},t.$$.update=()=>{var e;1&t.$$.dirty&&n(1,(e=r.value,o=nt[e%nt.length]))},[r,o]}class pt extends V{constructor(t){super(),U(this,t,$t,dt,c,{cell:0})}}function ht(t,e,n){const o=t.slice();return o[6]=e[n],o}function mt(t,e){let n,o,r;return o=new pt({props:{cell:e[6]}}),{key:t,first:null,c(){n=h(""),D(o.$$.fragment),this.first=n},m(t,e){f(t,n,e),F(o,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.cell=e[6]),o.$set(r)},i(t){r||(G(o.$$.fragment,t),r=!0)},o(t){T(o.$$.fragment,t),r=!1},d(t){t&&d(n),H(o,t)}}}function gt(t){let e,n,o,l,c,s,i,u,p,h,g,y,x=[],w=new Map;n=new ut({props:{icon:"expand_less"}}),n.$on("click",t[2]),c=new ut({props:{icon:"chevron_left"}}),c.$on("click",t[3]);let b=t[0];const k=t=>t[6].id;for(let e=0;e<b.length;e+=1){let n=ht(t,b,e),o=k(n);w.set(o,x[e]=mt(o,n))}return p=new ut({props:{icon:"chevron_right"}}),p.$on("click",t[4]),g=new ut({props:{icon:"expand_more"}}),g.$on("click",t[5]),{c(){e=$("div"),D(n.$$.fragment),o=m(),l=$("div"),D(c.$$.fragment),s=m(),i=$("div");for(let t=0;t<x.length;t+=1)x[t].c();u=m(),D(p.$$.fragment),h=m(),D(g.$$.fragment),v(i,"class","cells svelte-6g9tug"),v(l,"class","center-region svelte-6g9tug"),v(e,"class","board ml-auto mr-auto svelte-6g9tug")},m(t,r){f(t,e,r),F(n,e,null),a(e,o),a(e,l),F(c,l,null),a(l,s),a(l,i);for(let t=0;t<x.length;t+=1)x[t].m(i,null);a(l,u),F(p,l,null),a(e,h),F(g,e,null),y=!0},p(t,[e]){1&e&&(b=t[0],B={r:0,c:[],p:B},x=function(t,e,n,o,r,l,c,s,i,u,a,f){let d=t.length,$=l.length,p=d;const h={};for(;p--;)h[t[p].key]=p;const m=[],g=new Map,v=new Map;for(p=$;p--;){const t=f(r,l,p),s=n(t);let i=c.get(s);i?o&&i.p(t,e):(i=u(s,t),i.c()),g.set(s,m[p]=i),s in h&&v.set(s,Math.abs(p-h[s]))}const y=new Set,x=new Set;function w(t){G(t,1),t.m(s,a),c.set(t.key,t),a=t.first,$--}for(;d&&$;){const e=m[$-1],n=t[d-1],o=e.key,r=n.key;e===n?(a=e.first,d--,$--):g.has(r)?!c.has(o)||y.has(o)?w(e):x.has(r)?d--:v.get(o)>v.get(r)?(x.add(o),w(e)):(y.add(r),d--):(i(n,c),d--)}for(;d--;){const e=t[d];g.has(e.key)||i(e,c)}for(;$;)w(m[$-1]);return m}(x,e,k,1,t,b,w,i,Z,mt,null,ht),B.r||r(B.c),B=B.p)},i(t){if(!y){G(n.$$.fragment,t),G(c.$$.fragment,t);for(let t=0;t<b.length;t+=1)G(x[t]);G(p.$$.fragment,t),G(g.$$.fragment,t),y=!0}},o(t){T(n.$$.fragment,t),T(c.$$.fragment,t);for(let t=0;t<x.length;t+=1)T(x[t]);T(p.$$.fragment,t),T(g.$$.fragment,t),y=!1},d(t){t&&d(e),H(n),H(c);for(let t=0;t<x.length;t+=1)x[t].d();H(p),H(g)}}}function vt(t,e,n){const o=C();let{cells:r}=e;return t.$$set=t=>{"cells"in t&&n(0,r=t.cells)},[r,o,()=>o("up"),()=>o("left"),()=>o("right"),()=>o("down")]}class yt extends V{constructor(t){super(),U(this,t,vt,gt,c,{cells:0})}}function xt(t,e){return Ct(t,e+4)}function wt(t,e){return Ct(t,e-4)}function bt(t,e){return(e+1)%4==0?null:Ct(t,e+1)}function kt(t,e){return e%4==0?null:Ct(t,e-1)}function Ct(t,e){return t[e]}function _t(t){let e,n,o,r,l;function c(e){t[6](e)}let s={};return void 0!==t[0]&&(s.cells=t[0]),e=new yt({props:s}),E.push((()=>function(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}(e,"cells",c))),e.$on("up",t[7]),e.$on("down",t[8]),e.$on("left",t[9]),e.$on("right",t[10]),{c(){D(e.$$.fragment)},m(n,c){F(e,n,c),o=!0,r||(l=g(window,"keydown",t[1]),r=!0)},p(t,[o]){const r={};var l;!n&&1&o&&(n=!0,r.cells=t[0],l=()=>n=!1,L.push(l)),e.$set(r)},i(t){o||(G(e.$$.fragment,t),o=!0)},o(t){T(e.$$.fragment,t),o=!1},d(t){H(e,t),r=!1,l()}}}function Mt(t,e,n){let o=[],r=!1;function l(){n(0,o=X(16,3)),r=!1}function c(){r||(r=!0,console.log("Game over"))}function s(t=!0){return f(wt,xt,t)}function i(t=!0){return f(xt,wt,t)}function u(t=!0){return f(kt,bt,t)}function a(t=!0){return f(bt,kt,t)}function f(t,e,r){let l=!1;if(r)for(let t of o)t.wasMerged=!1;if(l=d(t,e,r)||l,l&&!r)return l;let f=!1;for(let t=0;t<o.length;t++){let n=o[t];if(0!==n.value&&!n.wasMerged){let c=e(o,t);if(c&&c.value===n.value){if(!r)return!0;f=!0,l=!0,n.wasMerged=!0,n.value+=c.value,c.value=0}}}return f&&(l=d(t,e,r)||l),r?(l?function(){let t=[];for(let e of o)0===e.value&&t.push(e),e.shouldAppear=!1;if(0===t.length)return c(),!1;{let e=Q(t);e.value=tt(),e.shouldAppear=!0}}():s(!1)||i(!1)||a(!1)||u(!1)?console.info("could move"):c(),l&&n(0,o),l):l}function d(t,e,n){let r=!1;for(;;){let e=!1;for(let l=0;l<o.length;l++){let c=o[l];if(0!==c.value){let s=t(o,l);if(s&&0===s.value){if(!n)return!0;e=!0,r=!0,s.value=c.value,c.value=0}}}if(!e)break}return r}l();return[o,function(t){const e=t.key,n=t.keyCode;switch(console.log({key:e,keyCode:n}),e){case"r":l();break;case"ArrowUp":s();break;case"ArrowDown":i();break;case"ArrowLeft":u();break;case"ArrowRight":a()}},s,i,u,a,function(t){o=t,n(0,o)},()=>s(),()=>i(),()=>u(),()=>a()]}class Et extends V{constructor(t){super(),U(this,t,Mt,_t,c,{})}}function At(e){let n,o,r,l,c,s,i,u,p;return c=new K({props:{href:"https://github.com/loremdipso/YAN2048_Svelte"}}),u=new Et({}),{c(){n=$("link"),o=$("link"),r=$("link"),l=m(),D(c.$$.fragment),s=m(),i=$("main"),D(u.$$.fragment),v(n,"rel","stylesheet"),v(n,"href","https://fonts.googleapis.com/icon?family=Material+Icons"),v(o,"rel","stylesheet"),v(o,"href","https://fonts.googleapis.com/css?family=Roboto:300,400,500,600,700"),v(r,"rel","stylesheet"),v(r,"href","https://fonts.googleapis.com/css?family=Roboto+Mono"),v(i,"class","fade-in svelte-1eogsiq")},m(t,e){a(document.head,n),a(document.head,o),a(document.head,r),f(t,l,e),F(c,t,e),f(t,s,e),f(t,i,e),F(u,i,null),p=!0},p:t,i(t){p||(G(c.$$.fragment,t),G(u.$$.fragment,t),p=!0)},o(t){T(c.$$.fragment,t),T(u.$$.fragment,t),p=!1},d(t){d(n),d(o),d(r),t&&d(l),H(c,t),t&&d(s),t&&d(i),H(u)}}}return new class extends V{constructor(t){super(),U(this,t,null,At,c,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
